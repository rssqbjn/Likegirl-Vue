# Like Girl 项目全栈总结


## 项目概述

Like Girl 是基于经典开源PHP项目"LikeGirl v5.2.0"进行的现代化重构作品。原项目是一个广受欢迎的情侣小站系统，我们将其从传统的 PHP + MySQL 架构完全重构为现代化的 Vue 3 + CloudBase 云原生架构，实现了技术栈的全面升级和用户体验的显著提升。
## 技术架构

### 前端架构
- **框架**: Vue 3 (Composition API)
- **路由**: Vue Router 4
- **状态管理**: Vuex 4
- **构建工具**: Vite
- **样式**: CSS3 + 响应式设计
- **路由模式**: Hash 模式 (适配 CloudBase 部署)

### 后端架构
- **云平台**: 腾讯云开发（CloudBase）
- **运行环境**: Node.js
- **数据库**: 云开发数据库（NoSQL）
- **认证方式**: JWT Token
- **密码加密**: MD5

## 项目结构

### 前端结构
```
src/
├── pages/           # 页面组件
├── components/      # 公共组件
├── admin/          # 后台管理相关
├── router/         # 路由配置
├── styles/         # 样式文件
└── utils/          # 工具函数
```

### 后端结构（云函数）
```
cloudfunctions/
├── auth/           # 认证模块
├── admin/          # 管理员模块
├── leaving/        # 留言板模块
├── loveImg/        # 恋爱相册模块
├── lovelist/       # 恋爱清单模块
├── article/        # 文章模块
├── settings/       # 设置模块
└── ipManage/       # IP管理模块
```

## 功能模块

### 前台功能
1. **首页** (`/`) - 网站主页
2. **点点滴滴** (`/little`) - 文章列表页面
3. **文章详情** (`/page/:id`) - 单篇文章展示
4. **留言板** (`/leaving`) - 用户留言功能
5. **关于页面** (`/about`) - 网站介绍
6. **恋爱相册** (`/loveImg`) - 图片展示
7. **恋爱清单** (`/list`) - 事件列表

### 后台管理功能
1. **登录系统** (`/admin`)- 管理员身份验证
2. **仪表盘** - 数据统计概览
3. **内容管理**:
   - 留言管理和设置
   - 文章管理 (点点滴滴)
   - 相册管理 (恋爱相册)
   - 清单管理 (恋爱清单)
4. **系统设置**:
   - 基本设置
   - 用户配置
   - 关于页面设置
5. **安全管理**:
   - IP 封禁管理
   - 非法访问监控

## 后端云函数模块详解

### 1. 认证模块 (auth)
**主要功能**:
- 管理员登录验证
- JWT Token生成与验证
- 密码修改
- 登录频率限制
- IP封禁检查

**核心特性**:
- 支持MD5密码加密
- 24小时Token有效期
- 5分钟内最多5次登录尝试限制
- 详细的登录日志记录

### 2. 管理员模块 (admin)
**主要功能**:
- 仪表板数据统计
- 用户管理
- 留言管理（审核、删除）
- 相册管理
- 恋爱列表管理
- 系统信息查看
- 数据备份与恢复

### 3. 留言板模块 (leaving)
**主要功能**:
- 留言展示与分页
- 留言提交
- 内容过滤（违禁词检查）
- IP地理位置获取
- 每日留言限制

**核心特性**:
- 多API容错的IP地理位置查询
- QQ头像自动获取
- 违禁词和违禁符号过滤
- IP每日留言限制（每IP每天1次）

### 4. 恋爱相册模块 (loveImg)
**主要功能**:
- 相册展示与分页
- 相册添加、编辑、删除
- 图片URL处理
- 相册统计

### 5. 恋爱清单模块 (lovelist)
**主要功能**:
- 清单展示与管理
- 完成状态切换
- 清单项CRUD操作
- 完成率统计

### 6. 文章模块 (article)
**主要功能**:
- 文章列表展示
- 文章详情查看
- 文章CRUD操作
- 文章搜索
- 阅读时间计算

**核心特性**:
- HTML内容处理
- 关键词高亮搜索

### 7. 设置模块 (settings)
**主要功能**:
- 基础设置管理
- 自定义设置（CSS、HTML）
- 留言设置
- 综合用户设置更新

### 8. IP管理模块 (ipManage)
**主要功能**:
- IP封禁管理
- 非法访问记录
- IP统计信息
- 过期封禁清理

## 前端技术特点

### 1. 现代化 Vue 3 架构
- 使用 Composition API
- 响应式数据管理
- 组件化开发

### 2. 完整的路由系统
- 前后台分离的路由配置
- 路由守卫和权限控制
- 动态路由加载

### 3. 状态管理
- Vuex 集中状态管理
- 用户认证状态
- 站点信息管理
- 统计数据管理

### 4. 用户体验优化
- 加载动画效果
- 响应式设计
- 页面标题动态设置

## 数据库设计

### 核心集合
1. **users** - 用户信息
2. **leaving** - 留言数据
3. **loveImg** - 恋爱相册数据
4. **lovelist** - 恋爱清单数据
5. **article** - 文章数据
6. **text** - 基础设置数据
7. **login** - 登录配置数据
8. **about** - 关于页面数据
9. **diySet** - 自定义设置数据
10. **leavSet** - 留言设置数据

### 管理集合
11. **ipBan** - IP封禁记录
12. **illegalAccess** - 非法访问记录
13. **login_attempts** - 登录尝试记录
14. **IPerror** - IP访问记录

## 安全特性

### 1. 认证与授权
- JWT Token认证机制
- 24小时Token有效期
- Token自动过期处理
- 路由权限验证

### 2. 访问控制
- IP封禁系统
- 每日留言限制（每IP每天1次）
- 操作权限验证
- 路由守卫

### 3. 内容安全
- 违禁词过滤系统
- 违禁符号检查
- 内容长度限制
- HTML标签处理

## API接口设计

### 统一响应格式
```javascript
{
  success: boolean,  // 操作是否成功
  message: string,   // 操作结果描述
  data?: any,        // 返回的数据（如果有）
  error?: string,    // 错误信息（如果有）
  code?: number      // 错误代码（如果有）
}
```

### 分页查询格式
```javascript
{
  list: Array,       // 数据列表
  total: number,     // 总记录数
  page: number,      // 当前页码
  limit: number,     // 每页数量
  totalPages: number // 总页数
}
```

## 前后端交互

### 1. 数据流向
- 前端通过 API 请求云函数
- 云函数处理业务逻辑并返回数据
- 前端接收数据并更新视图

### 2. 状态管理
- 用户认证状态存储在 Vuex 和 localStorage
- 全局配置通过 Vuex 管理
- 页面数据通过组件内状态管理

### 3. 错误处理
- 统一的错误处理机制
- 友好的错误提示
- 网络异常处理

## 项目特色

### 1. 全栈云开发架构
- 基于腾讯云开发的Serverless架构
- 前后端完全分离
- 微服务云函数设计

### 2. 完善的权限系统
- 基于JWT的认证机制
- 细粒度的权限控制
- 安全的密码处理

### 3. 模块化设计
- 前后台路由分离
- 功能模块清晰划分
- 组件复用性强

### 4. 用户体验优化
- 分页查询支持
- 实时统计数据
- 友好的错误提示
- 响应式设计



## 部署与配置

### 环境要求
- 腾讯云开发环境
- Node.js 18.15+
- 云开发数据库

### 详细部署步骤
📋 **[查看完整部署指南](./部署步骤.md)** - 包含详细的云函数部署、数据库初始化、环境配置等步骤

### 前端部署
- 使用 Hash 路由模式适配 CloudBase 静态托管
- 构建优化配置
- 资源压缩

### 后端部署
1. 创建云开发环境
2. 部署云函数
3. 初始化数据库集合
4. 配置安全规则
5. 设置域名和SSL证书


Like Girl 是一个结构清晰、功能完整的恋爱主题网站项目。采用了现代化的 Vue 3 前端技术栈和腾讯云开发的后端架构，具备完整的前后台功能。项目代码组织良好，具有良好的可维护性和扩展性，是一个优秀的全栈 Web 应用示例。

项目特别适合作为：
- 个人博客网站
- 情侣纪念网站
- Vue 3 + 云开发学习项目
- 全栈开发实践项目
